matrix = SmartMatrix.create(DigitalPin.P0, 256, 8, NeoPixelMode.RGB)
strip = neopixel.create(DigitalPin.P0, 256, NeoPixelMode.RGB)

def rotate_text(text, angle):
    lines = text.splitlines()

    if not lines or not lines[0]:
        return text  # Return original text if it's empty or invalid

    if angle == 90:
        rotated_text = []
        for column_index in range(len(lines[0])):
            column = "".join(row[column_index] if column_index < len(row) else ' ' for row in lines[::-1])
            rotated_text.append(column)
    elif angle == 180:
        rotated_text = [line[::-1] for line in lines[::-1]]
    elif angle == 270:
        rotated_text = []
        for column_index in range(len(lines[0]) - 1, -1, -1):
            column = "".join(row[column_index] if column_index < len(row) else ' ' for row in lines)
            rotated_text.append(column)
    else:
        return text

    return "\n".join(rotated_text)


def on_forever():
    matrix.clear()
    original_text = "Happy New Year 2024 !"
    rotated_text2 = rotate_text(original_text, 90)
    matrix.scroll_text(rotated_text2,
        10,
        4,
        neopixel.colors(NeoPixelColors.INDIGO))
    EPXDisplay.powerupclear(strip, 30)
    myAnimation = hex("""
        040005092001120300000000000400001700000e00000400033d071abb0a17c602007c01007d0404c70404c604024304040300004d0411b1218bbf1b71ef0618b500003f0000fd0101db0f0f5102020f0000f30512b72182d91848c41e6cfd100df7030ad2134edc0e3b0700008e00000d00008900001100008600001300008500001f0000060000220100220000150000160101560101b9080cbd08177e01007f0404cb0303ca0402590100ef0308b51143c11a6dac061b2c0000bb0000ee071ab91d7adf0d36b700005e0000f4040f9600001400009200009000001800002f00000b00002e00001d00001d01012e01016f0000c7050d870b2b1f05189f0404cf0303f5040dd1134f8d124ef20514c71761bd1b74e40b2c9e0000f10616e50b2c1b00009b00009a000049010000000000000000000000000000000000000000000000000000000000000000000000000102020300000003020201000000000405060708000000090a0b0c0100000d0e0f10111213131312141415160d0017180f191a141414141414141414170017180f1b1c1414141414141414141700171d1e1f1414141414141414141417002021141414141414141414141421200000222314141414141414141423220000000024251414141414141425240000000000002627141414141427260000000000000000262514141425260000000000000000000024231423240000000000000000000000002228220000000000000000000000000000000000000000000050006523002400250026002a002b002c002d0032003329342a352b362c3a2d3b2b3c2b3d293e0041004220432e442f453046314700480049004a324b334c344d354e204f00510052285336543755385639573a5800593a5a3b5e285f0061006228633c640f653d663e673f6840693f6e286f00710072287341741e753e7e287f008100821783428d428e178f009200934394449c449d439e00a300a402a545ab45ac02ad00b400b546b645ba45bb46bc00c500c602c744c944ca02cb00d600d743d847d943da00e700e800e90050004f33003400350036003a003b003c003d004200430044484549464a4a4b4b4c4c484d004e0052005303544d554e564f57505a515b525c4d5d035e006200634764536554660f67556d476e007200734774567557765877597d477e0082008302845a855b865c8c5a8d028e009300945d955e9b5e9c5d9d00a400a54aa65faa5fab4aac00b500b64ab75eb95eba4abb00c600c75dc813c95dca00d700d800d90050004f3329342a352b362c3a2d3b2b3c2b3d294220432e442f453046314a324b334c344d354e2052285336543755385639573a5a3b5b145c145d145e286228633c640f653d663e673f6d146e2872287341741e753e761477147d147e28821783428414851486148c148d428e179343944495149b149c449d43a402a545a614aa14ab45ac02b546b645b714b914ba45bb46c602c744c814c944ca02d743d847d9430000
        """)
    EPXDisplay.write_animation(strip, myAnimation)
    basic.pause(1000)
    myAnimation2 = hex("""
        0f00041b2601cb090000000000001101012702035a06000e00012102023d04000c00001c01013a03000800001601013303334f04714103ff2200000600001001000500012f032c5005614503af3301000300000b00255205514804265205a63502000100000200012302011e021e5305424c041b54059d3702ce1b008f1300001a01145605324f04125605883c02db1d009f15000c57052253050b5805724103e31e00bf1900e61e00af1700620d000015010758050a5805674303654403ea1f00cf1b00eb1f006b0e007810000858057540030314014d49040414014b4904f52000df1d00f320008e12005c46038111005946034f0a000100003c0800fa2100ef1f00861100951300fb21003b0700f92100991400a71600a81600f720009b1400f62000390700a41500370700b5180050000977017802790187028803890297019802990150001467046805690476047706780379067a048605870389038a0596049706980399069a04a704a805a90450002057075808590766076709680369096a0775077609770379037a097b07850886038a038b0895079609970399039a099b07a607a709a803a909aa07b707b808b907500041460a470b480b490b4a0a550a560c5703580359035a0c5b0a640a650c6603670369036a036b0c6c0a740b75037603770d780e790d7a037b037c0b840b8503870e880f890e8b038c0b940b95039603970d980e990d9a039b039c0ba40aa50ca603a703a903aa03ab0cac0ab50ab60cb703b803b903ba0cbb0ac60ac70bc80bc90bca0a50005436103711381139113a104412450b46134703480349034a134b0b4c12540b550356035a035b035c0b6310641365036714681569146b036c136d107311740376147716780f79167a147c037d11831184038615870f890f8a158c038d119311940396149716980f99169a149c039d11a310a413a503a714a815a914ab03ac13ad10b40bb503b603ba03bb03bc0bc412c50bc613c703c803c903ca13cb0bcc12d610d711d811d911da10500078251726182718281829182a182b1733173411350236033703380339033a033b023c113d1743114403450346034a034b034c034d115217530254035719581a59195c035d025e17621863036403661b671c680f691c6a1b6c036d036e18721873037519761c770f790f7a1c7b197d037e1882188303851a860f8a0f8b1a8d038e18921893039519961c970f990f9a1c9b199d039e18a218a303a403a61ba71ca80fa91caa1bac03ad03ae18b217b302b403b719b81ab919bc03bd02be17c311c403c503c603ca03cb03cc03cd11d317d411d502d603d703d803d903da03db02dc11dd17e517e618e718e818e918ea18eb174901000000000000000000000000000000000000000000001d12121212121d000000000000001e181f03030303031f181e000000001e20030303030303030303201e0000001803030303212221030303031800001d1f0303231a240f241a2303031f1d00120303031a0f0f0f0f0f1a030303120012030321240f2526250f242103031200120303220f0f2600260f0f220303120012030321240f2526250f242103031200120303031a0f0f0f0f0f1a03030312001d1f0303231a240f241a2303031f1d0000180303030321222103030303180000001e20030303030303030303201e000000001e181f03030303031f181e000000000000001d12121212121d00000000490100000000000000000000000000000000000000001d1212121212121212121d000000001d27030303030303030303271d00001d270303032829292928030303271d001203032a222b0f0f0f2b222a03031200120303220f0f0f0f0f0f0f22030312001203282b0f2c2d2d2d2c0f2b280312001203290f0f2d0000002d0f0f290312001203290f0f2d0000002d0f0f290312001203290f0f2d0000002d0f0f290312001203282b0f2c2d2d2d2c0f2b28031200120303220f0f0f0f0f0f0f22030312001203032a222b0f0f0f2b222a030312001d270303032829292928030303271d00001d27030303030303030303271d000000001d1212121212121212121d0000490100000000000000000000000000000000000000001d2703030303030303271d000000001d27032e2f2f2f2f2f2e03271d00001d273029310f0f0f0f0f312930271d002703290f0f0f3233320f0f0f29032700032e310f343536003635340f312e0300032f0f0f350000000000350f0f2f0300032f0f3236000000000036320f2f0300032f0f3300000000000000330f2f0300032f0f3236000000000036320f2f0300032f0f0f350000000000350f0f2f0300032e310f343536003635340f312e03002703290f0f0f3233320f0f0f290327001d273029310f0f0f0f0f312930271d00001d27032e2f2f2f2f2f2e03271d000000001d2703030303030303271d0000490100000000000008030303030308000000000000003703382a2a2a2a2a380337000000003703393a0f0f0f0f0f3a39033700003703303b0f0f3c3d3c0f0f3b3003370003393b0f3e333f003f333e0f3b390308032f0f3e400000000000403e0f2f030341420f3300000000000000330f4241032a0f3c3f000000000000003f3c0f2a032a0f3d0000000000000000003d0f2a032a0f3c3f000000000000003f3c0f2a032a0f0f3300000000000000330f0f2a08383a0f3e400000000000403e0f3a380003393b0f3e333f003f333e0f3b3903003703303b0f0f3c3d3c0f0f3b30033700003703392f420f0f0f422f39033700000000370303412a2a2a4103033700004901000000000000080303030303080000000000000043440f0f0f0f0f0f0f44430000000045460f474848484848470f4645000043460f494a00000000004a490f4643002a0f49260000000000000026490f44084b0f3d0000000000000000003d0f0f030f494c0000000000000000004c490f030f480000000000000000000000480f030f480000000000000000000000480f030f480000000000000000000000480f030f480000000000000000000000480f084b474a0000000000000000004a470f002a0f49260000000000000026494d220043460f494a00000000004a490f2f37000045460f474848484848470f464500000000432a4b0f0f0f0f0f0f4443000049010000000000004e0f0f0f0f0f4e0000000000004f500f5152530000545255504f00004f565748580000000000005957564f00500f3d0000000000000000005a5750000f5b5c00000000000000000000480f4e5158000000000000000000000058510f5200000000000000000000000000520f5200000000000000000000000000520f5200000000000000000000000000520f5200000000000000000000000000520f5200000000000000000000000000524e520000000000000000000000005851005559000000000000000000005c5b0f0050575a00000000000000005c5d0f50004f565748580000000000585b0f564f00004f500f515252525252510f504f0050004b135e1452155f160017001a001b5f1c521d5e22602361240025002c002d612e60315e326133003d003e613f5e4152420043004e004f52515f52005e005f5f61006f0071007f0081008f0091009f00a100af00b15fbe00bf5fc152c200cd00ce00cf52d15ed261d300dc00dd00de61df5ee260e361e400e500eb00ec00ed61ee60f35ef452f55ff600f700f800f900fa00fb5ffc52fd5e50003a050006000700080009000a000b0012001300140015001b001c001d001e002100220023002d002e002f00310032003e003f0041004f00500051005f006000700080009000a000b000b100bf00c100cf00d100d200de00df00e100e200e300ed00ee00ef00f200f300f400f500fb00fc00fd00fe004401c20000
        """)
    EPXDisplay.write_animation(strip, myAnimation2)
    basic.pause(1000)
    myAnimation3 = hex("""
        0e00030cdc022a0d0000000000750000707000250200d735352424a5a1a1004a4a0672727277530021210cadadad090906b507079b7800474143e6505022211ea5a5159292000101001d1fbac80c0c540908f87070966c00b2b200b3920136360072722a545494960a00af1818ab7103b651031918019393293b0302f163631302005d5c5cbcb111aca50235342e979791572300b86f199c9c01878700636303ad1414cd22220e0e0db0a7008e8e1baa89026212123b4acf0705026d6d4b5a2b2b2b16161e1e1e8b9761baba017c4e1e7928019fa329381500ba2c13968b1edb3f3f999904c2c238f36868bf71121b0a096c48052328be630504adad00c41111af0e0e3b3b3bc454242929004242017d7d00a95d01667392ed5c5c9c0707cc2c2cc29821a9a9003d0e0665686d8383138c8c2d9c7c0ab4a11bcc1c1cb2aa00c2bb1558586953535311110eb87e06ba2a2abd0c0c6a6a02660b0b4601002f0200a5a5023737b2180602727f88bab2075c5c007d7d36a99c03adad235e5e6479780fd93939362e20b16602b97204a59100f76e6e5c6079a1910da50707abad11a47f0f750a0a6d02011c0200bdbd06b41414b4ad032c0908b02020d02121b88d0d1d1c078c5c00b8b8b86a24005c4b47999a244b0302676752b2a408c7a5193b3b007e7e7d63630d6b1514ea56568e7239b29b00d12727adad2ba57b03b37400807103e14949898900ba0a003434c2c7c71bba1514a30b0aaeae1dc914145f5f0c403f3d3714148e8e3e9e8208b50a0ac20e0e565c87333333999e36282fc253530082531fa6a91c8a8200a49710430808d01f1eb41919b7970478857b590707bdb61f1312119b9b12b898072c2ca07a0505a11308693002141205370200625400a38500626262a5a723b36a06931105a2a318cac81c63635b8f9957998d176c6c6b909230c3c3209d8000b1b120b1b1135858727e7d11d83737c7bc1d690a0a6e6e51242321a7830e5f08083e4fd19a09092b34c441413f596089697794b9b0091e21bb00000049010014141414141c1a1a1a1a1a1c14141414141414551a1a1a1a1a1a1a1a1a5514141414551abed7861a1a50d7121a1a551414551a43ebbb751a1ac5ed39ba1a1a55141a1a974e15831a1a60f24edd1a1a1a1c501abef0b83f1a1adaef59d41a1a1a1a1a1a1a1a1aa22180c41a1a1a1a1a1a1a1a1a1a1a1aa5d6cd211a1a1a1a1a1a1a1a5e021a1a791919791a1a57721a1a1a505e316e1a1a1a1a1a1a02562f1a1a1a1a1a13cf07b1a9a9bc56236e5e1a1a1c1a505e77275f952d7414bc721a1a1a141a1a1a5e93aec320ead1721a1a1a1a14551a1a1a661bcac4812a1a1a1a1a551414551a1a1a1a1a1a1a1a1a1a1a5514141414551a1a1a1a1a1a1a1a1a55141444028a49010014141414141c1a1a1a1a1a1c141414141414145562053b1a1adcab73245514141414551a24e21a1a1ab41ed3c91a551414551a1a1adec764648d1a1a1a1a1a55141a8b8b1a1adf4242e98b401a1a1a1a1c8b1a1a1a1a5e46dbe1deac8b1a1a1a1a1a5e0202021d9de79e7ce3305e1a1a1a1a2f141414b294080c141492315e501a1a2f3acf141128b9141414140a06501a1a2fcf7ec8c8c8c8343a141456721a1a1a2fc80fb93e3e3e3e0c1414571a1a1c1a2f6a963c3e3eb3c1741414131a1a141a50a79f884fc64f014f8a1413501a14551a662152aeaeaec352d002501a551414551a37ae16b0b0eccebf501a5514141414551a666629e5f15e1a1a55141449010014141414141c1ab5631a1a1c1414141414141455505ea6aa1f191a1a1a5514141414551a1a1a1a9a9a1a1a401a1a5514140c1a1a5048af497a485e1a1a1a1a55141c1a726ec8ee0bdc0a3130305e1a1a1c72506e3a0cb99d69343a3a14131a1a1a1a7256343434343434343a14131a1a1a1a06234cc1c14c3434343a14131a1a1a1a2f27886c8f88389f6f253a131a1a1a1a2f8e6526a05c5c47335b44131a1a1a1a724d901882265a2647b7bd721a1a1c501ad28c5a4a4a5aa8a385871a1a1a141a1a8d4b907d7da3510d58351a1a1a14551a1a769b5d2e544b1b661a1a1a551414551a1a40d867668d1a1a1a1a5514141414551a1a1a1a1a1a1a1a1a55141449010014141414141c1ab5631a1a1c1414141414141455505ea6aa1f191a1a1a5514141414551a500606c0842f5e401a1a5514140c50135755e828530c771313501a55141c2fc814142b2cd334141414131a1a1c065714141434923414141414131a1a1a5e5514141414141414141414131a1a1a5e141414143a340c14141414611a1a1a5e14142770983d6a1414141478501aa45e14274fc332e61789982714361a1aaf509c03ad107d8cc3a38ccc8a131a1a1c50a903c28226a05a5a476d71131a1a141a5e09654a8282265a046d41721a1a14551a2a8033e4e4a351b67f2a1a1a551414551a666b45b622a2a2661a1a5514141414551a1a6666661a1a1a1a55141449010014141414141c1ab5631a1a1c1414141414141455505ea6aa1f191a1a1a5514141414551a1a1a1a9a9a1a1a1a1a1a551414551a1a50132fe012485e1a1a1a1a5514501a726ec8ee0bdc0a3130305e1a1a1c72506e3a0cb99d69343a3a14131a1a1a1a7256343434343434343a14131a1a1a1a06234cc1c14c3434343a14131a1a1a1a2f27886c8f88389f6f253a131a1aa41a2f8e6526a05c5c47335b44131a1aaf1a724d901882265a2647b7bd721a1a1c501ad28c5a4a4a5aa8a385871a1a1a141a1a66d5907d7da3510d58351a1a1a14551a1a661b912e544b1b661a1a1a551414551a1a1a1a66668d1a1a1a1a5514141414551a1a1a1a1a1a1a1a1a55141449010014141414141cd4a1631a1a1c1414141414141455505ea6aa1f191a1a1a5514141414551a500606c0842f5e1a1a1a5514145550135755e828530c771313501a5514502fc814142b2cd334141414131a1a1c065714141434923414141414131a1a1a5e5514141414141414141414131a1a1a5e141414143a340c14141414611a1a1a5e14142770983d6a1414141478501aa45e14274fc332e61789982714361a1aaf509c03ad107d8cc3a38ccc8a131a1a1c50a903c28226a05a5a476d71131a1a141a5e09654a8282265a046d41721a1a14551a2a8033e4e4a351b67f2a1a1a551414551a666b45b622a2a2661a1a5514141414551a1a6666661a1a1a1a55141449010014141414141c1ab5631a1a1c1414141414141455505ea6aa1f191a1a1a5514141414551a1a1a1a9a9a1a1a401a1a551414551a1a50132fe012485e1a1a1a1a55141a1a726ec8ee0bdc0a3130305e1a1a1c1a506e3a0cb99d69343a3a14131a1a1a1a7256343434343434343a14131a1a1a1a06234cc1c14c3434343a14131a1a1a1a2f27886c8f88389f6f253a131a1a1a1a2f8e6526a05c5c47335b44131a1a1a1a724d901882265a2647b7bd721a1a1c501ad28c5a4a4a5aa8a385871a1a1a141a1a66d5907d7da3510d58351a1a1a14551a1a661b912e544b1b661a1a1a551414551a1a1a1a66668d1a1a1a1a5514141414551a1a1a1a1a1a1a1a1a55141449010014141414141c1ab5631a1a1c1414141414141455505ea6aa1f191a1a1a5514141414551a500606c0842f5e1a1a1a5514145550135755e828530c771313501a5514502fc814142b2cd334141414131a1a1c065714141434923414141414131a1a1a5e5514141414141414141414131a1a1a5e141414143a340c14141414611a1a1a5e14142770983d6a1414141478501aa45e14274fc332e61789982714361a1aaf509c03ad107d8cc3a38ccc8a131a1a1c50a903c28226a05a5a476d71131a1a141a5e09654a8282265a046d41721a1a14551a2a8033e4e4a351b67f2a1a1a551414551a666b45b622a2a2661a1a5514141414551a1a6666661a1a1a1a55141449010014141414141c1ab5631a1a1c1414141414141455505ea6aa1f191a1a1a5514141414551a1a1a1a9a9a1a1a401a1a551414551a1a5048af497a485e1a1a1a1a5514501a726ec8ee0bdc0a3130305e1a1a1c72506e3a0cb99d69343a3a14131a1a1a1a7256343434343434343a14131a1a1a1a06234cc1c14c3434343a14131a1a1a1a2f27886c8f88389f6f253a131a1aa41a2f8e6526a05c5c47335b44131a1aaf1a724d901882265a2647b7bd721a1a1c501ad28c5a4a4a5aa8a385871a1a1a141a1a66d5907d7da3510d58351a1a1a14551a1a661b912e544b1b661a1a1a551414551a1a1a1a66668d1a1a1a1a5514141414551a1a1a1a1a1a1a1a1a55141449010014141414141c1ab5631a1a1c1414141414141455505ea6aa1f191a1a1a5514141414551a500606c0842f5e401a1a5514145550135755e828530c771313501a5514502fc814142b2cd334141414131a1a1c065714141434923414141414131a1a1a5e5514141414141414141414131a1a1a5e141414143a340c14141414611a1a1a5e14142770983d6a1414141478501aa45e14274fc332e61789982714361a1aaf509c03ad107d8cc3a38ccc8a131a1a1c50a903c28226a05a5a476d71131a1a141a5e09654a8282265a046d41721a1a14551a2a8033e4e4a351b67f2a1a1a551414551a666b45b622a2a2661a1a5514141414551a1a6666661a1a1a1a55141449010014141414141c1ab5631a1a1c1414141414141455505ea6aa1f191a1a1a5514141414551a1a1a1a9a9a1a1a401a1a551414551a1a5048af497a485e1a1a1a1a5514501a726ec8ee0bdc0a3130305e1a1a1c72506e3a0cb99d69343a3a14131a1a1a1a7256343434343434343a14131a1a1a1a06234cc1c14c3434343a14131a1a1a1a2f27886c8f88389f6f253a131a1aa41a2f8e6526a05c5c47335b44131a1aaf1a724d901882265a2647b7bd721a1a1c501ad28c5a4a4a5aa8a385871a1a1a141a1a66d5907d7da3510d58351a1a1a14551a1a661b912e544b1b661a1a1a551414551a1a1a1a66668d1a1a1a1a5514141414551a1a1a1a1a1a1a1a1a55141449010014141414141c1ab5631a1a1c1414141414141455505ea6aa1f191a1a1a5514141414551a500606c0842f5e401a1a5514145550135755e828530c771313501a5514502fc814142b2cd334141414131a1a1c065714141434923414141414131a1a1a5e5514141414141414141414131a1a1a5e141414143a340c14141414611a1a1a5e14142770983d6a1414141478501aa45e14274fc332e61789982714361a1aaf509c03ad107d8cc3a38ccc8a131a1a1c50a903c28226a05a5a476d71131a1a141a5e09654a8282265a046d41721a1a14551a2a8033e4e4a351b67f2a1a1a551414551a666b45b622a2a2661a1a5514141414551a1a6666661a1a1a1a55141449010014141414141c1a1a1a1a1a1c14141414141414926805991a1adcab732455141414145572d9cb7b1a1ab41ed3c91a551414551a1a1a1a2a81812a1a1a1a1a1a55141a8b8b1a1adf42420e1a1a1a1a1a1a1c8b1a1a1a1a5e46db5e1a1a1a1a1a1a1a1a5e0202021d9de79e0202575e1a1a1a1a2f141414b294080c141492315e501a1a2f3acf141128b9141414140a06501a1a2fcf7ec8c8c8c8343a141456721a1a1a2fc80fb93e3e3e3e0c1414571a1a1c1a2f6a963c3e3eb3c1741414131a1a141a50a79f884fc64f014f8a1413501a14551a662152aeaeaec352d002501a551414551a37ae16b0b0eccebf501a5514141414551a66666666665e1a1a5514140000
        """)
    EPXDisplay.write_animation(strip, myAnimation3)
    strip.show()
basic.forever(on_forever)
